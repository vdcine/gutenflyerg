<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Gutenflyerg</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <meta property="og:title" content="Gutenflyerg" />
    <meta
      property="og:description"
      content="Crear flyers personalizados para las Veladas de Cine."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://vdcine.github.io/gutenflyerg/" />
    <meta property="og:locale" content="es_ES" />
  </head>
  <body>
    <div class="container">
      <h1 id="instrucciones">Gunteflyerg de Veladas de Cine</h1>
      <hr />
      <!-- FORMULARIO -->
      <form id="movieForm">
        <h2 id="instrucciones">1°: Buscar película</h2>
        <span id="instrucciones">Título:</span>
        <input type="text" id="movieSearch" placeholder="Terminator" required />
        <br />
        <span id="instrucciones">Idioma:</span>
        <input type="text" id="movieLanguage" placeholder="es" />
        <br />
        <span id="instrucciones"
          >No es obligatorio. 'en' para ingles, 'es' para español</span
        >
        <br />
        <button id="searchButton" type="submit">Buscar</button>
        <hr />
        <h2 id="instrucciones">2°: Seleccionar pelicula de los resultados</h2>
        <div id="movie-results" style="margin-top: 20px"></div>
        <hr />
      </form>

      <div
        class="flyer-flex-row"
        style="
          display: flex;
          flex-direction: row;
          align-items: flex-start;
          justify-content: center;
          gap: 40px;
        "
      >
        <div
          class="flyer-flex-col"
          style="
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 24px;
          "
        >
          <h2 id="instrucciones">
            3°: Seleccionar backdrop o poster como fondo.
          </h2>
          <h3 id="instrucciones" style="margin-top: 0px">
            Puede dejarse el fondo por defecto de no querer usar backdrop o
            poster.
          </h3>
          <!-- CAROUSELS ARRIBA -->
          <div
            style="
              width: 100%;
              display: flex;
              flex-direction: row;
              justify-content: center;
              gap: 40px;
              flex-wrap: wrap;
            "
          >
            <!-- Backdrop Carousel -->
            <div
              id="backdrop-carousel-container"
              style="
                width: 700px;
                display: flex;
                flex-direction: column;
                align-items: center;
              "
            >
              <button id="backdrops" style="margin-bottom: 10px">
                Ver todos los backdrops
              </button>
              <div style="margin-bottom: 10px">
                <input
                  type="text"
                  id="backdrop-direct-input"
                  placeholder="Pegar URL de backdrop"
                  style="width: 500px; margin-bottom: 5px; padding: 5px"
                />
                <button id="load-backdrop-direct" style="margin-left: 5px">
                  Cargar backdrop directo
                </button>
              </div>
              <div style="font-weight: bold; margin-bottom: 10px">
                Backdrops
              </div>
              <div
                id="backdrop-carousel"
                style="display: flex; align-items: center; gap: 20px"
              >
                <button id="backdrop-prev" style="font-size: 2rem">
                  &#8592;
                </button>
                <img
                  id="backdrop-carousel-img"
                  src=""
                  alt="Backdrop"
                  style="
                    max-width: 640px;
                    max-height: 360px;
                    border: 1px solid #ccc;
                    background: #eee;
                  "
                />
                <button id="backdrop-next" style="font-size: 2rem">
                  &#8594;
                </button>
              </div>
              <div
                id="backdrop-counter"
                style="margin-top: 8px; font-size: 1rem; color: #555"
              ></div>
              <button
                id="set-backdrop-as-bg"
                style="margin-top: 15px; font-size: 1rem"
              >
                Usar este backdrop como fondo del flyer
              </button>
              <button
                id="remove-backdrop-bg"
                style="margin-top: 5px; font-size: 1rem"
              >
                Quitar fondo de backdrop
              </button>
            </div>

            <!-- Poster Carousel -->
            <div
              id="poster-carousel-container"
              style="
                width: 350px;
                display: flex;
                flex-direction: column;
                align-items: center;
              "
            >
              <button id="posters" style="margin-bottom: 10px">
                Ver todos los posters
              </button>
              <div style="margin-bottom: 10px">
                <input
                  type="text"
                  id="poster-direct-input"
                  placeholder="Pegar URL de poster"
                  style="width: 300px; margin-bottom: 5px; padding: 5px"
                />
                <button id="load-poster-direct" style="margin-left: 5px">
                  Cargar poster directo
                </button>
              </div>
              <div style="font-weight: bold; margin-bottom: 10px">Posters</div>
              <div
                id="poster-carousel"
                style="display: flex; align-items: center; gap: 20px"
              >
                <button id="poster-prev" style="font-size: 2rem">
                  &#8592;
                </button>
                <img
                  id="poster-carousel-img"
                  src=""
                  alt="Poster"
                  style="
                    max-width: 220px;
                    max-height: 330px;
                    border: 1px solid #ccc;
                    background: #eee;
                  "
                />
                <button id="poster-next" style="font-size: 2rem">
                  &#8594;
                </button>
              </div>
              <div
                id="poster-counter"
                style="margin-top: 8px; font-size: 1rem; color: #555"
              ></div>
              <button
                id="set-poster-as-poster"
                style="margin-top: 15px; font-size: 1rem"
              >
                Usar este póster
              </button>
            </div>
          </div>
          <hr />
          <h2 id="instrucciones">4°: Editar textos y colores.</h2>
          <h3 id="instrucciones" style="margin-top: 0px">
            Utilizar el formulario para cambiar lo deseado.
            <br />
            En el caso del título al darle Shift+Enter o Enter en el textarea
            agrega un salto de línea.
            <br />
            Para modificar colores de textos y cajas hacer UN click sobre los
            mismos y luego seleccionar el recuadro que abre el color picker.
          </h3>

          <div class="panel">
            <div>
              <label>Ciclo</label>
              <input id="cicloInput" type="text" value="Ciclo" />
            </div>

            <div>
              <label>Fecha</label>
              <input id="dateInput" type="date" value="2025-08-06" />
            </div>
            <div>
              <label>Hora</label>
              <input id="hourInput" type="time" value="19:00" />
            </div>
            <div>
              <label>Título</label>
              <textarea id="titleInput" rows="2"></textarea>
            </div>

            <div class="full">
              <button id="applyTxtBtn">Aplicar textos</button>
            </div>

            <div>
              <label>Tamaño fecha</label>
              <input
                id="flyerDateFontSizeInput"
                type="number"
                min="10"
                max="100"
                value="50"
                style="width: 80px"
              />
              px
            </div>
            <div>
              <label>Tamaño hora</label>
              <input
                id="flyerHourFontSizeInput"
                type="number"
                min="10"
                max="100"
                value="50"
                style="width: 80px"
              />
              px
            </div>
            <div>
              <label>Ancho rectángulo</label>
              <input
                id="rectWidthInput"
                type="number"
                min="10"
                max="1000"
                value="480"
                style="width: 80px"
              />
              px
            </div>
          </div>

          <div>
            <button id="toggle-rect">Ocultar rectángulo vertical</button>
          </div>

          <!-- FLYER -->
          <div id="flyer">
            <div class="tape"></div>
            <div class="rect"></div>
            <h1 class="header">VELADAS DE CINE</h1>

            <div class="subheader">
              <h2 id="ciclo">Ciclo</h2>
            </div>

            <div class="poster-container">
              <img id="poster" src="" alt="Poster" crossorigin="anonymous" />
              <div id="bubble" class="dialogo-comic">
                ¡Debate luego!
                <div class="comic-tail-border"></div>
                <div class="comic-tail-noise"></div>
              </div>
            </div>

            <div class="flyer-row">
              <div class="flyer-date-group">
                <input
                  type="text"
                  id="dateInput"
                  value="MIÉRCOLES 6 DE AGOSTO"
                  style="display: none"
                />
                <div id="flyer-date" class="flyer-date">
                  MIÉRCOLES 6<br />DE AGOSTO
                </div>
              </div>
              <div class="flyer-main-group">
                <h3 id="title">Título</h3>
                <p id="year">Año</p>
                <p id="director">Director</p>
                <p id="duracion">100 minutos</p>
              </div>
              <div class="flyer-hour-group">
                <input
                  type="text"
                  id="hourInput"
                  value="19:00 HS"
                  style="display: none"
                />
                <div id="flyer-hour" class="flyer-hour">19:00 HS</div>
                <div id="flyer-biblioteca" class="flyer-biblioteca">
                  <img
                    src="images/icon.png"
                    alt="ubicación"
                    class="flyer-location-icon"
                  />
                  <span>Biblioteca Menéndez</span>
                </div>
              </div>
            </div>

            <div class="event-data">
              <div class="rect2"></div>
              <span id="org">
                Organizan Matías Corona y Francisco Albani con apoyo<br />
                de la Comisión Directiva de la Biblioteca Menéndez.
              </span>
            </div>
          </div>
        </div>
      </div>
      <h2 id="instrucciones">
        <br />
        5°: Guardar imagen del flyer
        <br />
      </h2>

      <!-- Botón para exportar -->
      <button type="button" id="saveFlyer" style="margin-bottom: 20px">
        Descargar
      </button>
    </div>

    <input
      type="color"
      id="floatingColorPicker"
      style="position: absolute; display: none; z-index: 9999"
    />
    <button
      id="activateEyedropper"
      type="button"
      style="margin-left: 10px; display: none"
    ></button>
    <div
      id="comicColorPickerPanel"
      style="
        position: absolute;
        display: none;
        z-index: 9999;
        background: #fff;
        padding: 12px 16px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      "
    >
      <div
        style="
          display: flex;
          align-items: center;
          margin-bottom: 12px;
          gap: 8px;
        "
      >
        <span style="font-weight: bold">Último color:</span>
        <div
          id="comicLastColorSquare"
          style="
            width: 24px;
            height: 24px;
            border: 2px solid #333;
            border-radius: 4px;
            background: #fff;
            cursor: pointer;
            display: none;
          "
          title="Click para seleccionar el último color seleccionado"
        ></div>
      </div>
      <label style="display: block; margin-bottom: 8px">
        Fondo <input type="color" id="comicBgColorPicker" />
        <button
          id="activateEyedropperBg"
          type="button"
          style="margin-left: 10px"
        >
          Seleccionar color
        </button>
      </label>
      <label style="display: block; margin-bottom: 8px">
        Borde <input type="color" id="comicBorderColorPicker" />

        <button
          id="activateEyedropperBorder"
          type="button"
          style="margin-left: 10px"
        >
          Seleccionar color
        </button>
      </label>
      <label style="display: block">
        Texto <input type="color" id="comicTextColorPicker" />

        <button
          id="activateEyedropperText"
          type="button"
          style="margin-left: 10px"
        >
          Seleccionar color
        </button>
      </label>
    </div>
  </body>
  <script src="script.js"></script>
</html>
